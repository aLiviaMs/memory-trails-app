<div class="records-page">
  <!-- Page title -->
  <div class="records-page__header">
    <h1 class="records-page__title">Di√°rio da Felicidade ‚ù§Ô∏è</h1>
  </div>

  <!-- Switch to filter liked records -->
  <div class="records-page__filter">
    <div class="filter-switch">
      <label class="filter-switch__label" for="showOnlyFavoritesSwitch">
        Mostrar apenas curtidos
      </label>
      <p-toggleswitch
        id="showOnlyFavoritesSwitch"
        class="filter-switch__input"
        [(ngModel)]="showOnlyFavorites"
        (onChange)="onFilterChange($event)"
        [disabled]="isLoading"
      />
    </div>
  </div>

  <!-- Loading inicial -->
  @if (isLoading) {
  <div class="records-page__loading">
    <p-progressSpinner
      styleClass="w-4rem h-4rem"
      strokeWidth="4"
      animationDuration="1s"
    >
    </p-progressSpinner>
    <p class="loading-text">Carregando registros...</p>
  </div>
  }

  <!-- Listagem de cards -->
  @if (!isLoading) {
  <div class="records-page__content">
    @if (filteredRecords.length > 0) {
    <div class="records-grid">
      @for (record of filteredRecords; track record.id) {
      <div class="records-grid__item">
        <app-record-card
          class="records-grid__card"
          [content]="record"
          (favoriteToggled)="onFavoriteChanged($event)"
        >
        </app-record-card>
      </div>
      }
    </div>

    <!-- Loading more indicator -->
    @if (isLoadingMore) {
    <div class="records-page__loading-more">
      <p-progressSpinner
        styleClass="w-2rem h-2rem"
        strokeWidth="4"
        animationDuration="1s"
      >
      </p-progressSpinner>
      <p class="loading-more-text">Carregando mais...</p>
    </div>
    }

    <!-- End of results indicator -->
    @if (!hasMoreRecords && !isLoadingMore) { } } @else {
    <!-- Estado vazio -->
    <div class="empty-state">
      <i class="empty-state__icon pi pi-inbox"></i>
      <h3 class="empty-state__title">
        @if (!showOnlyFavorites) { Nenhum registro encontrado } @else { N√£o tem
        nada favoritado üë∫ }
      </h3>
      <p class="empty-state__message">
        @if (showOnlyFavorites) { Voc√™ n√£o gostou de nada? Voc√™ me odeia! }
        @else { N√£o h√° registros dispon√≠veis. }
      </p>
    </div>
    }
  </div>
  }
</div>
